void pr( char *str)
{
char buf[500]="";
strcpy(buf,str); // вот и сама уязвимость, собственной персоной
}

int main(int argc, char **argv)
{
//....................
int bytesRecv = SOCKET_ERROR;
while( bytesRecv == SOCKET_ERROR )
{
//Получаем данные, отправленные клиентом
bytesRecv = recv( clientSocket, Message, 5000, 0 );

if ( bytesRecv == 0 || bytesRecv == WSAECONNRESET )
{
printf( "\nConnection Closed.\n");
break;
}
}

pr(Message); // вызываем функцию, которая не проверяет длину входного буфера при копировании

closesocket(clientSocket);
closesocket(serverSocket);
WSACleanup();
return 0;
}
